<% content_for :title, "New Profile" %>

<div class="container-md">
  <div class="flex items-center space-x-4">
    <%= link_to admin_profiles_path, class: "btn-ghost text-sm py-1 px-3" do %>
      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
      </svg>
      Back to Profiles
    <% end %>
  </div>

  <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-50 mt-4 mb-8">Create New Profile</h1>

  <!-- Form -->
  <div class="card bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700">
    <div class="card-body">
      <%= form_with model: [:admin, @profile], local: true, class: "space-y-6" do |form| %>
        <%= render 'shared/form_error_message', model: @profile %>

        <!-- Full name -->
        <div class="mb-4">
          <%= form.label :full_name, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Full name<% if field_required?(@profile, :full_name) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_field :full_name, {
            placeholder: "Enter full name...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :full_name) ? { required: true } : {}) %>
          <% if @profile.errors[:full_name].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:full_name].first %></p>
          <% end %>
        </div>

        <!-- Title -->
        <div class="mb-4">
          <%= form.label :title, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Title<% if field_required?(@profile, :title) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_field :title, {
            placeholder: "Enter title...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :title) ? { required: true } : {}) %>
          <% if @profile.errors[:title].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:title].first %></p>
          <% end %>
        </div>

        <!-- Company -->
        <div class="mb-4">
          <%= form.label :company, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Company<% if field_required?(@profile, :company) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_field :company, {
            placeholder: "Enter company...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :company) ? { required: true } : {}) %>
          <% if @profile.errors[:company].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:company].first %></p>
          <% end %>
        </div>

        <!-- Phone -->
        <div class="mb-4">
          <%= form.label :phone, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Phone<% if field_required?(@profile, :phone) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_field :phone, {
            placeholder: "Enter phone...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :phone) ? { required: true } : {}) %>
          <% if @profile.errors[:phone].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:phone].first %></p>
          <% end %>
        </div>

        <!-- Email -->
        <div class="mb-4">
          <%= form.label :email, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Email<% if field_required?(@profile, :email) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_field :email, {
            placeholder: "Enter email...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :email) ? { required: true } : {}) %>
          <% if @profile.errors[:email].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:email].first %></p>
          <% end %>
        </div>

        <!-- Location -->
        <div class="mb-4">
          <%= form.label :location, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Location<% if field_required?(@profile, :location) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_field :location, {
            placeholder: "Enter location...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :location) ? { required: true } : {}) %>
          <% if @profile.errors[:location].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:location].first %></p>
          <% end %>
        </div>

        <!-- Bio -->
        <div class="mb-4">
          <%= form.label :bio, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Bio<% if field_required?(@profile, :bio) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_area :bio, {
            rows: 5,
            placeholder: "Enter bio...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :bio) ? { required: true } : {}) %>
          <% if @profile.errors[:bio].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:bio].first %></p>
          <% end %>
        </div>

        <!-- Specializations -->
        <div class="mb-4">
          <%= form.label :specializations, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Specializations<% if field_required?(@profile, :specializations) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_area :specializations, {
            rows: 5,
            placeholder: "Enter specializations...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :specializations) ? { required: true } : {}) %>
          <% if @profile.errors[:specializations].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:specializations].first %></p>
          <% end %>
        </div>

        <!-- Avatar url -->
        <div class="mb-4">
          <%= form.label :avatar_url, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Avatar url<% if field_required?(@profile, :avatar_url) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_field :avatar_url, {
            placeholder: "Enter avatar url...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :avatar_url) ? { required: true } : {}) %>
          <% if @profile.errors[:avatar_url].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:avatar_url].first %></p>
          <% end %>
        </div>

        <!-- Stats -->
        <div class="mb-4">
          <%= form.label :stats, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Stats<% if field_required?(@profile, :stats) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_field :stats, {
            placeholder: "Enter stats...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :stats) ? { required: true } : {}) %>
          <% if @profile.errors[:stats].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:stats].first %></p>
          <% end %>
        </div>

        <!-- Slug -->
        <div class="mb-4">
          <%= form.label :slug, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            Slug<% if field_required?(@profile, :slug) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.text_field :slug, {
            placeholder: "Enter slug...",
            class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50"
          }.merge(field_required?(@profile, :slug) ? { required: true } : {}) %>
          <% if @profile.errors[:slug].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:slug].first %></p>
          <% end %>
        </div>

        <!-- User -->
        <div class="mb-4">
          <%= form.label :user_id, class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" do %>
            User<% if field_required?(@profile, :user) %> <span class="text-red-500">*</span><% end %>
          <% end %>
          <%= form.select :user_id, 
              options_for_select([['Select User', '']] + User.all.map { |item| [item.name, item.id] }, @profile.user_id),
              {},
              { class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-50" } %>
          <% if @profile.errors[:user_id].any? %>
            <p class="text-sm text-red-500 mt-1"><%= @profile.errors[:user_id].first %></p>
          <% end %>
        </div>

        <!-- Form Actions -->
        <div class="flex justify-end space-x-3">
          <%= link_to admin_profiles_path, class: "btn-ghost" do %>
            Cancel
          <% end %>
          <%= form.submit "Create Profile", class: "btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>